!DOCTYPE html>
<html class="mcss">
<head>
   <meta charset="UTF-8">
   <link rel="stylesheet" href="midas.css">
   <script src="controls.js"></script>
   <script src="midas.js"></script>
   <script src="mhttpd.js"></script>
   <title>Move Control</title>

   <style>
      .mtable td { padding: 10px; }
   </style>
   <script>
     function stop_motors()  {
       mjsonrpc_db_paste(["/equipment/motors00/settings/stop[0,1,2]"], [[true,true,true]]).then(function(rpc) {
         result=rpc.result;      
         console.log("Stopping motors");
       }).catch(function(error) {
          mjsonrpc_error_alert(error);
       });
     }
   </script>
</head>

<body class="mcss" onload="mhttpd_init('Move Control');;">

<!-- header and side navigation will be filled in mhttpd_init -->
<div id="mheader"></div>
<div id="msidenav"></div>

<div id="mmain">

  <table class="mtable">
    <tr>
      <th colspan="3" class="mtableheader">High Level Gantry Control</th>
    </tr>
    <tr>
      <td> Reinitialize Gantry </td>
      <td colspan="2">
        <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Move/Settings/Reinitialize" ></div>
      </td>
    </tr>
    <tr>
      <td> Is Gantry Initialized? </td>
      <td colspan="2">
        <div class="modbvalue" data-odb-path="/Equipment/Move/Variables/Initialized" ></div>
      </td>
    </tr>
    <tr>
      <td> Is Gantry Initializing? </td>
      <td colspan="2">
        <div class="modbvalue"  data-odb-path="/Equipment/Move/Variables/Initializing" ></div>
      </td>
    </tr>
    <tr>
      <td> Is Gantry Moving? </td>
      <td colspan="2">
        <div class="modbvalue"  data-odb-path="/Equipment/Move/Variables/Moving" ></div>
      </td>
    </tr>
    <tr>
      <td> Axes </td>
      <td> X </td>  <td> Y </td>
      
    </tr>
    <tr>
      <td> Destination (m) </td>
      <td> <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Move/Settings/Destination[0]" ></div> </td>
      <td> <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Move/Settings/Destination[1]" ></div> </td>
    </tr>
    <tr>
      <td> Readback Position (m) </td>
      <td> <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Move/Variables/Position[0]" ></div> </td>
      <td> <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Move/Variables/Position[1]" ></div> </td>
    </tr>
    


  </table>

<button onclick="stop_motors()">Stop Motors and Gantry!</button>


  <table class="mtable">
    <tr>
      <th colspan="9" class="mtableheader">Low-level Gantry Movement Control</th>
    </tr>
    <tr>
      <td>
	Axis
      </td>
      <td>
	Destination
      </td>
      <td>
	Position <br> Readback
      </td>
      <td>
	Encoder Position <br> Readback
      </td>
      <td>
	Start Move
      </td>
      <td>
	Moving Readback
      </td>
      <td>
	Limit Pos?
      </td>
      <td>
	Limit Neg?
      </td>
      <td>
	Speed
      </td>
    </tr>

    <tr>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Settings/Names[1]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Motors00/Settings/Destination[1]" ></div>
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Position[1]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Encoder[1]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Motors00/Settings/Move[1]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Moving[1]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Limit Pos[1]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Limit Neg[1]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Motors00/Settings/Velocity[1]" ></div> 	
      </td>
    </tr>

    <tr>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Settings/Names[2]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Motors00/Settings/Destination[2]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Position[2]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Encoder[2]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Motors00/Settings/Move[2]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Moving[2]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Limit Pos[2]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-path="/Equipment/Motors00/Variables/Limit Neg[2]" ></div> 	
      </td>
      <td>
        <div class="modbvalue" data-odb-editable="1" data-odb-path="/Equipment/Motors00/Settings/Velocity[2]" ></div> 	
      </td>
    </tr>
    


  </table>
</div>

</body>
</html>
